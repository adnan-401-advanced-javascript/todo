(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{148:function(e,t,n){e.exports=n(289)},172:function(e,t,n){},178:function(e,t){},180:function(e,t){},194:function(e,t){},196:function(e,t){},224:function(e,t){},226:function(e,t){},227:function(e,t){},233:function(e,t){},235:function(e,t){},253:function(e,t){},255:function(e,t){},267:function(e,t){},270:function(e,t){},287:function(e,t,n){},289:function(e,t,n){"use strict";n.r(t);var a=n(24),l=n(25),r=n(27),c=n(26),o=n(0),u=n.n(o),i=n(142),m=n.n(i),s=n(74),d=n(7),f=n(46),p=n(36),E=n(290),b=n(143),h=n(291),g=function(e){var t=function(e){var t=Object(o.useState)({}),n=Object(d.a)(t,2),a=n[0],l=n[1];return[function(e){e.persist(),l(Object(p.a)(Object(p.a)({},a),{},Object(f.a)({},e.target.name,e.target.value)))},function(t){t.preventDefault(),t.target.reset(),e(a);l({})}]}(e.handleSubmit),n=Object(d.a)(t,2),a=n[0],l=n[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement("h2",null,"Add Item:"),u.a.createElement(E.a,{"data-testid":"form",onSubmit:l},u.a.createElement(E.a.Row,null,u.a.createElement(E.a.Group,{as:b.a},u.a.createElement(E.a.Label,null,"To Do Item"),u.a.createElement(E.a.Control,{type:"text",name:"text",onChange:a,placeholder:"Add To Do List Item"}))),u.a.createElement(E.a.Row,null,u.a.createElement(E.a.Group,{as:b.a},u.a.createElement(E.a.Label,null,"Assigned To"),u.a.createElement(E.a.Control,{type:"text",name:"assignee",placeholder:"Assigned To",onChange:a}))),u.a.createElement(E.a.Row,null,u.a.createElement(E.a.Group,{as:b.a},u.a.createElement(E.a.Label,null,"Difficulty Rating"),u.a.createElement(E.a.Control,{defaultValue:"2",type:"range",min:"1",max:"5",name:"difficulty",varient:"primary",onChange:a}))),u.a.createElement(h.a,{varient:"primary",type:"submit"},"Add Item")))},v=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return u.a.createElement("ul",null,this.props.list.map((function(t){return u.a.createElement("li",{key:t._id},u.a.createElement("span",{style:{float:"left",display:"inline"},onClick:function(){return e.props.handleComplete(t._id)}},u.a.createElement("b",null,"text")," ",t.text," \xa0",u.a.createElement("b",null,"difficulty")," ",t.difficulty," \xa0",u.a.createElement("b",null,"complete")," \xa0",u.a.createElement("b",{style:{backgroundColor:t.complete?"red":"green",color:"white"}},t.complete?"completed":"pending"),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("b",null,"assignee")," ",t.assignee),u.a.createElement("button",{onClick:function(){return e.props.deleteItem(t._id)}},"del"))})))}}]),n}(u.a.Component),j=n(144),O=n.n(j),C=function(){return[function(e,t,n,a){return O()({url:e,method:t,mode:"cors",cache:"no-cache",headers:Object(p.a)({"Content-Type":"application/json"},a),data:n})}]},y=(n(172),"https://to-do-adnan.herokuapp.com/api/v1/items"),k=function(){var e=Object(o.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],l=C(),r=Object(d.a)(l,1)[0],c=Object(o.useState)(0),i=Object(d.a)(c,2),m=i[0],f=i[1],p=Object(o.useState)([]),E=Object(d.a)(p,2),b=E[0],h=E[1],j=Object(o.useState)(5),O=Object(d.a)(j,2),k=O[0],S=O[1],w=Object(o.useState)(!0),x=Object(d.a)(w,2),T=x[0],L=x[1],R=Object(o.useState)("difficulty"),I=Object(d.a)(R,2),_=I[0],G=I[1];Object(o.useEffect)((function(){console.log("component did moount!"),D()}),[]),Object(o.useEffect)((function(){var e=b.slice((m-1)*k,m*k);a(e)}),[k,m,b]),Object(o.useEffect)((function(){h(P(Object(s.a)(b)))}),[_]),Object(o.useEffect)((function(){T?D():h(b.filter((function(e){return!0!==e.complete})))}),[T]);var P=function(e){return e.sort((function(e,t){return e[_]<t[_]?1:-1}))},D=function(){r(y,"get").then((function(e){var t=e.data,n=P(t.results);h(n),0===m&&f(1)})).catch(console.error)};return u.a.createElement(u.a.Fragment,null,u.a.createElement("header",{"data-testid":"itemsHeader"},u.a.createElement("h2",null,"There are ",b.filter((function(e){return!e.complete})).length," Items To Complete")),u.a.createElement("section",{className:"todo"},u.a.createElement("div",null,u.a.createElement(g,{handleSubmit:function(e){e.due=new Date,r(y,"post",e).then((function(e){var t=e.data;h(P([].concat(Object(s.a)(b),[t])))})).catch(console.error)}})),u.a.createElement("div",null,u.a.createElement(v,{list:n,deleteItem:function(e){var t=n.filter((function(t){return t._id===e}))[0]||{};if(t._id){var a="".concat(y,"/").concat(e);r(a,"delete").then((function(){h(b.filter((function(e){return e._id!==t._id})))})).catch(console.error)}},handleComplete:function(e){var t=n.filter((function(t){return t._id===e}))[0]||{};if(t._id){t.complete=!t.complete;var l="".concat(y,"/").concat(e);r(l,"put",t).then((function(){a(n.map((function(e){return e._id===t._id?t:e})))})).catch(console.error)}}})),u.a.createElement("div",null,u.a.createElement("button",{hidden:1===m,onClick:function(){return f(m-1)}},"prev"),function(){for(var e=[],t=function(t){e.push(u.a.createElement("button",{style:{background:m===t?"green":""},onClick:function(){return f(t)},key:t},t))},n=1;n<=Math.ceil(b.length/k);n++)t(n);return e}(),u.a.createElement("button",{hidden:m===Math.ceil(b.length/k),onClick:function(){return f(m+1)}},"next"),u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("label",null,"elementsPerPage"),"\xa0 \xa0",u.a.createElement("select",{"data-testid":"elementsPerPage",defaultValue:5,onChange:function(e){return S(e.target.value)}},u.a.createElement("option",{value:3},"3"),u.a.createElement("option",{value:5},"5"),u.a.createElement("option",{value:7},"7")),u.a.createElement("br",null),u.a.createElement("label",null,"Sort By"),"\xa0 \xa0",u.a.createElement("select",{"data-testid":"sortBy",defaultValue:"difficulty",onChange:function(e){return G(e.target.value)}},u.a.createElement("option",{value:"difficulty"},"difficulty"),u.a.createElement("option",{value:"complete"},"complete")),u.a.createElement("br",null),u.a.createElement("label",null,"hideCompleted"),u.a.createElement("button",{"data-testid":"hideCompleted",onClick:function(){return L(!T)}},T+""))))},S=n(73),w=n.n(S),x=n(145),T=n(48),L=n.n(T),R=n(146),I=n.n(R),_=n(147),G=n.n(_),P="https://api-js401.herokuapp.com",D=u.a.createContext();var N=function(e){var t=C(),n=Object(d.a)(t,1)[0],a=Object(o.useState)(!1),l=Object(d.a)(a,2),r=l[0],c=l[1],i=Object(o.useState)({}),m=Object(d.a)(i,2),s=m[0],f=m[1],p=Object(o.useState)(),E=Object(d.a)(p,2),b=E[0],h=E[1],g=Object(o.useState)(!1),v=Object(d.a)(g,2),j=v[0],O=v[1],y=Object(o.useState)(!1),k=Object(d.a)(y,2),S=k[0],T=k[1],R=Object(o.useCallback)((function(e){try{var t=I.a.decode(e);t?(console.log("user",t),_(!0,e,t)):(console.log("Token inValid no-user"),_(!1,null,{}))}catch(n){_(!1,null,{}),console.log("Token Validation Error",n)}}),[]),_=function(){var e=Object(x.a)(w.a.mark((function e(t,n,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.a.save("auth",n),e.next=3,h(n);case 3:return e.next=5,c(t);case 5:return e.next=7,f(a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){var t=new URLSearchParams(window.location.search),n=L.a.load("auth"),a=t.get("token")||n||e.token;console.log("token",a),R(a)}),[e.token,R]);var N={loggedIn:r,login:function(e,t){var a=G.a.encode("".concat(e,":").concat(t));n("".concat(P,"/signin"),"post",{username:e,password:t},{Authorization:"Basic ".concat(a)}).then((function(e){var t;R(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.token)})).catch(console.error)},signup:function(e){n("".concat(P,"/signup"),"post",e).then((function(e){var t;console.log(e.data),R(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.token)})).catch(console.error)},logout:function(){L.a.remove("auth"),_(!1,null,{})},can:function(e){var t,n;return null===(t=N.user)||void 0===t||null===(n=t.capabilities)||void 0===n?void 0:n.includes(e)},user:s,token:b,okToContinue:j,setOkToContinue:O,switchToSignup:S,setSwitchToSignup:T};return u.a.createElement(D.Provider,{value:N},e.children)},q=function(){var e=Object(o.useContext)(D),t=Object(o.useState)(""),n=Object(d.a)(t,2),a=n[0],l=n[1],r=Object(o.useState)(""),c=Object(d.a)(r,2),i=c[0],m=c[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement("center",null,u.a.createElement("h3",null,u.a.createElement("b",null,"Login")),u.a.createElement(E.a,{"data-testid":"login-form",className:"col-lg-6 offset-lg-3",onSubmit:function(t){t.preventDefault(),e.login(a,i)}},u.a.createElement(E.a.Row,null,u.a.createElement(E.a.Group,{as:b.a,sm:"4"},u.a.createElement(E.a.Label,null,"Username"),u.a.createElement(E.a.Control,{required:!0,placeholder:"Username",name:"username",type:"text",onChange:function(e){return l(e.target.value)}}))),u.a.createElement(E.a.Row,null,u.a.createElement(E.a.Group,{as:b.a,sm:"4"},u.a.createElement(E.a.Label,null,"Password"),u.a.createElement(E.a.Control,{required:!0,placeholder:"password",name:"password",type:"password",onChange:function(e){return m(e.target.value)}}))),u.a.createElement(E.a.Row,null,u.a.createElement(h.a,{type:"submit",variant:"primary",className:"mr-sm-4 submit-btn",size:"md"},"Login"),u.a.createElement(h.a,{variant:"info",onClick:function(){return e.setSwitchToSignup(!0)}},"Signup")))))},A=function(){var e=Object(o.useContext)(D),t=Object(o.useState)(""),n=Object(d.a)(t,2),a=n[0],l=n[1],r=Object(o.useState)(""),c=Object(d.a)(r,2),i=c[0],m=c[1],s=Object(o.useState)(""),f=Object(d.a)(s,2),p=f[0],g=f[1],v=Object(o.useState)(""),j=Object(d.a)(v,2),O=j[0],C=j[1];return u.a.createElement(u.a.Fragment,null,u.a.createElement("center",null,u.a.createElement("h3",null,u.a.createElement("b",null,"Signup")),u.a.createElement(E.a,{className:"col-lg-6 offset-lg-3","data-testid":"form",onSubmit:function(t){t.preventDefault(),e.signup({username:a,password:i,email:O,role:p})}},u.a.createElement(E.a.Row,null,u.a.createElement(E.a.Group,{as:b.a,sm:"4"},u.a.createElement(E.a.Label,null,"Username"),u.a.createElement(E.a.Control,{required:!0,placeholder:"Username",name:"username",type:"text",onChange:function(e){return l(e.target.value)}}))),u.a.createElement(E.a.Row,null,u.a.createElement(E.a.Group,{as:b.a,sm:"4"},u.a.createElement(E.a.Label,null,"Password"),u.a.createElement(E.a.Control,{required:!0,placeholder:"password",name:"password",type:"password",onChange:function(e){return m(e.target.value)}}))),u.a.createElement(E.a.Row,null,u.a.createElement(E.a.Group,{as:b.a,sm:"4"},u.a.createElement(E.a.Label,null,"Email"),u.a.createElement(E.a.Control,{required:!0,className:"mr-sm-5",placeholder:"email",name:"email",type:"email",onChange:function(e){return C(e.target.value)}}))),u.a.createElement(E.a.Row,null,u.a.createElement(E.a.Group,{as:b.a,sm:"4"},u.a.createElement(E.a.Label,null,"Role"),u.a.createElement(E.a.Control,{required:!0,className:"mr-sm-5",placeholder:"role",name:"role",type:"text",onChange:function(e){return g(e.target.value)}}))),u.a.createElement(E.a.Row,null,u.a.createElement(h.a,{type:"submit",variant:"primary",className:"mr-sm-4",size:"md"},"Signup"),u.a.createElement(h.a,{variant:"info",onClick:function(){return e.setSwitchToSignup(!1)}},"Back to Login")))))},B=n(15),F=function(e){var t=Object(o.useContext)(D),n=Object(o.useCallback)((function(){t.loggedIn&&t.setOkToContinue(!0)}),[t]);return Object(o.useEffect)((function(){n()}),[n]),u.a.createElement(B.b,{condition:t.loggedIn},u.a.createElement(B.c,null," ",u.a.createElement(B.b,{condition:t.okToContinue},u.a.createElement(B.c,null,u.a.createElement(h.a,{variant:"danger",onClick:function(){return t.logout()}},"logout"),e.children),u.a.createElement(B.a,null,u.a.createElement("p",null,"Forbidden!")))),u.a.createElement(B.a,null," ",u.a.createElement(B.b,{condition:t.switchToSignup},u.a.createElement(B.c,null,u.a.createElement(A,null)),u.a.createElement(B.a,null,u.a.createElement(q,null)))))},U=(n(287),n(288),function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return u.a.createElement("div",{"data-testid":"app"},u.a.createElement(N,{token:this.props.token},u.a.createElement(F,null,u.a.createElement(k,null))))}}]),n}(u.a.Component)),V=function(e){Object(r.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return u.a.createElement(U,null)}}]),n}(u.a.Component),z=document.getElementById("root");m.a.render(u.a.createElement(V,null),z)}},[[148,1,2]]]);
//# sourceMappingURL=main.e1c10466.chunk.js.map